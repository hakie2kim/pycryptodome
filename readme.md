## ğŸ’¬ ì†Œê°œ

Hybrid Encryption & Decryption ë° Pay-to-Multi-Signature ì´ë¡ ì„ ì ìš©í•œ íŒŒì´ì¬ ìŠ¤í¬ë¦½íŠ¸

## Hybrid Encryption & Decryption

### ê°œë…

![image](https://github.com/user-attachments/assets/11cdc7fa-bdcd-4962-91be-83a3c8b79065)

### ê³¼ì • ì„¤ëª…

**Hybrid Encryption**

1. ì´ í´ë” ì•ˆì—ëŠ” ë‘ ê°œì˜ ë³„ë„ íŒŒì´ì¬ íŒŒì¼ì´ ìˆìŠµë‹ˆë‹¤. ì´ ë‘ íŒŒì¼ì„ ì‹¤í–‰í•˜ê¸° ì „ì— ì‚¬ìš©ìëŠ” í•´ë‹¹ íŒŒì´ì¬ íŒŒì¼ë“¤ì´ ìˆëŠ” ë””ë ‰í† ë¦¬ë¡œ ì´ë™í•´ì•¼ í•©ë‹ˆë‹¤.

`$ cd [íŒŒì´ì¬ íŒŒì¼ë“¤ì´ ìœ„ì¹˜í•œ ë””ë ‰í† ë¦¬]`

2. ê·¸ëŸ° ë‹¤ìŒ, í˜„ì¬ ë””ë ‰í† ë¦¬ì— ìˆëŠ” `test11.txt`, `test2.txt`, `test3.txt`ë¼ëŠ” ì´ë¦„ì˜ ëª¨ë“  í…ìŠ¤íŠ¸ íŒŒì¼ì— ëŒ€í•´ í•˜ì´ë¸Œë¦¬ë“œ ì•”í˜¸í™”ë¥¼ ì‹¤í–‰í•©ë‹ˆë‹¤. ë‹¤ìŒ ëª…ë ¹ì–´ë¥¼ ì…ë ¥í•©ë‹ˆë‹¤.

`$ python3 hencryption.py`

`hencryption.py` íŒŒì¼ì€ ë¨¼ì € Aliceì™€ Bobì„ ìœ„í•œ ë‘ ê°œì˜ public ë° private í‚¤ ìŒì„ ìƒì„±í•©ë‹ˆë‹¤. Aliceê°€ ì†¡ì‹ ìê°€ ë˜ë©´ Bobì€ ìˆ˜ì‹ ìê°€ ë˜ê±°ë‚˜, ë°˜ëŒ€ë¡œ Bobì´ ì†¡ì‹ ìê°€ ë˜ê³  Aliceê°€ ìˆ˜ì‹ ìê°€ ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ ê³¼ì • í›„ì—, `private_Alice.pem`, `public_Alice.pem`, `private_Bob.pem`, `public_Bob.pem` íŒŒì¼ì´ í˜„ì¬ ë””ë ‰í† ë¦¬ì— ìƒì„±ë©ë‹ˆë‹¤. ì´ ë‹¨ê³„ì—ì„œëŠ” `hencryption.py`ê°€ ì‹¤í–‰ë  ë•Œë§ˆë‹¤ ì´ ë„¤ ê°œì˜ `.pem` íŒŒì¼ì´ ë®ì–´ì“°ì—¬ì§‘ë‹ˆë‹¤.

3. ë‹¤ìŒìœ¼ë¡œ, í”„ë¡œê·¸ë¨ì€ ì‚¬ìš©ìê°€ Aliceì¸ì§€ Bobì¸ì§€ ë¬»ê³  Alice ë˜ëŠ” Bobì„ ì…ë ¥í•˜ë„ë¡ ìš”êµ¬í•©ë‹ˆë‹¤. ì‚¬ìš©ìê°€ Alice(ì†¡ì‹ ì)ë¼ê³  ê°€ì •í•˜ë©´, í”„ë¡œê·¸ë¨ì€ symmetric í‚¤ë¥¼ Bobì˜(ìˆ˜ì‹ ì) ê³µê°œ í‚¤(RSA)ë¡œ ì•”í˜¸í™”í•©ë‹ˆë‹¤. `sym_key_encrypted_with_Bob_pk.bin` íŒŒì¼ì´ í˜„ì¬ ë””ë ‰í† ë¦¬ì— ìƒì„±ë©ë‹ˆë‹¤. ì‚¬ìš©ìê°€ Bob(ì†¡ì‹ ì)ì¸ ê²½ìš°, í”„ë¡œê·¸ë¨ì€ ëŒ€ì¹­ í‚¤ë¥¼ Aliceì˜(ìˆ˜ì‹ ì) ê³µê°œ í‚¤ë¡œ ì•”í˜¸í™”í•˜ì—¬ `sym_key_encrypted_with_Alice_pk.bin` íŒŒì¼ì„ ë§Œë“­ë‹ˆë‹¤. ì´ ë‹¨ê³„ì—ì„œëŠ” `hencryption.py`ê°€ ì‹¤í–‰ë  ë•Œë§ˆë‹¤ ì´ ë‘ ê°œì˜ ë°”ì´ë„ˆë¦¬ íŒŒì¼ì´ ë®ì–´ì“°ì—¬ì§‘ë‹ˆë‹¤.

![image](https://github.com/user-attachments/assets/8c792343-8ced-4ff1-9b50-aa4b7a8454a0)

4. ë§ˆì§€ë§‰ìœ¼ë¡œ, í”„ë¡œê·¸ë¨ì€ í˜„ì¬ ë””ë ‰í† ë¦¬ ë‚´ì˜ ëª¨ë“  `.txt` íŒŒì¼ì˜ ë‚´ìš©ì„ ì½ê³ , ëŒ€ì¹­ í‚¤ë¡œ ìƒì„±ëœ ì•”í˜¸ë¥¼ ì‚¬ìš©í•˜ì—¬ ê° í…ìŠ¤íŠ¸ íŒŒì¼ì„ ëŒ€ì¹­ì ìœ¼ë¡œ ì•”í˜¸í™”í•©ë‹ˆë‹¤(AES CBC ëª¨ë“œ). ì´ ê³¼ì • í›„ì—, `test11.enc`, `test2.enc`, `test3.enc` íŒŒì¼ì´ í˜„ì¬ ë””ë ‰í† ë¦¬ì— ìƒì„±ë˜ë©° ëª¨ë“  ì•”í˜¸í™” íŒŒì¼ê³¼ ë™ì¼í•œ ì´ˆê¸° ë²¡í„°ê°€ í•¨ê»˜ ìƒì„±ë©ë‹ˆë‹¤.

![image](https://github.com/user-attachments/assets/f3c0c17f-254a-43c7-99eb-48d121912122)

**Hybrid Decryption**

1. í˜„ì¬ ë””ë ‰í† ë¦¬ ë‚´ì˜ `test11.enc`, `test2.enc`, `test3.enc`ë¼ëŠ” ì´ë¦„ì˜ ëª¨ë“  `.enc` íŒŒì¼ì„ í•˜ì´ë¸Œë¦¬ë“œ ë³µí˜¸í™”í•©ë‹ˆë‹¤. ë‹¤ìŒ ëª…ë ¹ì–´ë¥¼ ì…ë ¥í•©ë‹ˆë‹¤. í”„ë¡œê·¸ë¨ì€ ìë™ìœ¼ë¡œ ëª¨ë“  `.enc` íŒŒì¼ ì´ë¦„ì„ ì½ì–´ ë³µí˜¸í™”í•©ë‹ˆë‹¤.

`$ python3 hdecryption.py [í•˜ì´ë¸Œë¦¬ë“œ ì•”í˜¸í™”ì—ì„œ ì‚¬ìš©ëœ ì´ˆê¸° ë²¡í„°]`

![image](https://github.com/user-attachments/assets/fc5cf921-6e40-466e-95ee-34d94efc5ec2)

2. í•˜ì´ë¸Œë¦¬ë“œ ë³µí˜¸í™” ê³¼ì •ê³¼ ë§ˆì°¬ê°€ì§€ë¡œ í”„ë¡œê·¸ë¨ì€ ë¨¼ì € ì‚¬ìš©ìê°€ Aliceì¸ì§€ Bobì¸ì§€ ë¬»ìŠµë‹ˆë‹¤. Aliceê°€ ì†¡ì‹ ìì˜€ë‹¤ê³  ê°€ì •í•˜ë©´, Bobì„ ìˆ˜ì‹ ìë¡œ ì…ë ¥í•´ì•¼ í•©ë‹ˆë‹¤.

3. ê·¸ëŸ° ë‹¤ìŒ, í”„ë¡œê·¸ë¨ì€ `private_Bob.pem` íŒŒì¼ì„ ì—´ì–´ Bobì˜(ìˆ˜ì‹ ì) ë¹„ë°€ í‚¤(RSA)ë¥¼ ì‚¬ìš©í•˜ì—¬ ëŒ€ì¹­ í‚¤ë¥¼ ë³µí˜¸í™”í•©ë‹ˆë‹¤. ë³µí˜¸í™”ëœ ëŒ€ì¹­ í‚¤ì™€ ì´ˆê¸° ë²¡í„°ë¥¼ ì‚¬ìš©í•˜ì—¬ ì•”í˜¸ë¥¼ ìƒì„±í•˜ê³  AES CBC ëª¨ë“œë¡œ ëª¨ë“  `.enc` íŒŒì¼ì„ ëŒ€ì¹­ì ìœ¼ë¡œ ë³µí˜¸í™”í•©ë‹ˆë‹¤. ì´ë¡œ ì¸í•´ ê° `.enc` íŒŒì¼ì— í¬í•¨ëœ ë‚´ìš©ì´ ë³µí˜¸í™”ë˜ì–´ ë‚˜íƒ€ë‚©ë‹ˆë‹¤. Bobì´ ì†¡ì‹ ìì´ê³  Aliceê°€ ìˆ˜ì‹ ìì¸ ê²½ìš°ì—ë„ ê³¼ì •ì€ ìœ ì‚¬í•©ë‹ˆë‹¤.

![image](https://github.com/user-attachments/assets/8297c796-f2e1-4a8f-95d2-921306edfe7e)

## Pay-to-Multi-Signature

### ê°œë…

![image](https://github.com/user-attachments/assets/0f81bf69-f1e4-4a92-acd5-05ab72b3414e)
![image](https://github.com/user-attachments/assets/1200d421-8118-49b8-9c6f-b49f2cf3a2a7)

[ì°¸ê³ ] https://learnmeabitcoin.com/technical/script/p2ms/

### ê³¼ì • ì„¤ëª…

![image](https://github.com/user-attachments/assets/0f3b0b85-eb4c-43d4-98bd-c6597eb4d357)

[ì°¸ê³ ] https://learnmeabitcoin.com/technical/script/p2ms/

1. ë¦¬ëˆ…ìŠ¤ì—ì„œ ë‹¤ìŒ ëª…ë ¹ì–´ë¥¼ ì‚¬ìš©í•˜ì—¬ `create.py`ë¥¼ ì‹¤í–‰í•©ë‹ˆë‹¤.

```bash
$ python3 create.py
```

í”„ë¡œê·¸ë¨ì´ ì‚¬ìš©ìê°€ ë‘ ê°œì˜ íŒŒë¼ë¯¸í„°ë¥¼ ì…ë ¥í•˜ë„ë¡ ìš”ì²­í•©ë‹ˆë‹¤. ì´ íŒŒë¼ë¯¸í„°ëŠ” ì•ì—ì„œ ì„¤ëª…í•œ ì¡°ê±´ì„ ë§Œì¡±í•´ì•¼ í•©ë‹ˆë‹¤. ì‹¤í–‰ í›„, ë‘ ê°œì˜ í…ìŠ¤íŠ¸ íŒŒì¼ `scriptPubKey.txt`ì™€ `scriptSig.txt`ê°€ ìƒì„±ë©ë‹ˆë‹¤. ê·¸ë¦¼ 1ì€ ì´ ë‘ í…ìŠ¤íŠ¸ íŒŒì¼ì— ì €ì¥ëœ ë‚´ìš©ì„ ë³´ì—¬ì¤ë‹ˆë‹¤. `scriptSig.txt`ì˜ `OP_1`ì€ ë”ë¯¸ ê°’ì´ë©°, `scriptPubKey.txt`ì˜ `2`ì™€ `4`ëŠ” ê°ê° ì„œëª…ê³¼ ê³µê°œ í‚¤ì˜ ìˆ˜ë¥¼ ë‚˜íƒ€ëƒ…ë‹ˆë‹¤.

![image](https://github.com/user-attachments/assets/f3baef78-c519-4d03-82f1-cd910d3e9178)
![image](https://github.com/user-attachments/assets/1b2a463d-8dd4-4b94-9464-ed6014289a05)

ê·¸ë¦¼ 1. ì„¸ ìŒì˜ `scriptPubKey.txt`ì™€ `scriptSig.txt`ê°€ í•„ìš”í–ˆê¸° ë•Œë¬¸ì— ê° íŒŒì¼ ì´ë¦„ì— `_1`ì´ ì¶”ê°€ë˜ì—ˆìŠµë‹ˆë‹¤. í•´ë‹¹ íŒŒì¼ì—ëŠ” ë‘ ê°œì˜ ì„œëª…ê³¼ ë„¤ ê°œì˜ ê³µê°œ í‚¤ê°€ í¬í•¨ë˜ì–´ ìˆìŠµë‹ˆë‹¤.

2. ë‹¤ìŒìœ¼ë¡œ, ë¦¬ëˆ…ìŠ¤ì—ì„œ ë‹¤ìŒ ëª…ë ¹ì–´ë¥¼ ì‚¬ìš©í•˜ì—¬ `verify.py`ë¥¼ ì‹¤í–‰í•©ë‹ˆë‹¤.

```bash
$ python3 verify.py
```

í”„ë¡œê·¸ë¨ì€ `scriptPubKey.txt`ì™€ `scriptSig.txt`ì˜ ëª¨ë“  ìš”ì†Œë¥¼ ì½ì–´ ìŠ¤íƒì— í‘¸ì‹œí•©ë‹ˆë‹¤(`OP_1` ë”ë¯¸ ê°’ ì œì™¸). ëª¨ë“  ìš”ì†Œë¥¼ í‘¸ì‹œí•œ í›„, í˜„ì¬ íŒŒì´ì¬ íŒŒì¼ì€ ê° ìš”ì†Œë¥¼ íŒí•˜ì—¬ ë‘ ê°œì˜ ë‹¤ë¥¸ ë¦¬ìŠ¤íŠ¸ì— ì €ì¥í•˜ê³  FILO(í›„ì…ì„ ì¶œ) ì›ì¹™ì„ ì‚¬ìš©í•˜ì—¬ í™•ì¸í•©ë‹ˆë‹¤. ì´ì œ ì„œëª…ê³¼ ê³µê°œ í‚¤ë¥¼ í™•ì¸í•˜ì—¬ ìŠ¤í¬ë¦½íŠ¸ë¥¼ ê²€ì¦í•˜ëŠ” ë‹¨ê³„ê°€ ì¤€ë¹„ëìŠµë‹ˆë‹¤. ì„œëª…ì´ ìœ íš¨í•  ë•Œë§ˆë‹¤ ì§‘ê³„ ìˆ˜ê°€ 1ì”© ì¦ê°€í•©ë‹ˆë‹¤. ìŠ¤í¬ë¦½íŠ¸ê°€ ë¹„ì›Œì§€ê³  ì„œëª…ì˜ ìˆ˜ê°€ ì§‘ê³„ì™€ ì¼ì¹˜í•˜ë©´ í”„ë¡œê·¸ë¨ì€ ìŠ¤íƒì— 1ì„ í‘¸ì‹œí•˜ê³  ì¢…ë£Œí•©ë‹ˆë‹¤. ê·¸ë¦¼ 2ì—ì„œ ê·¸ë¦¼ 4ëŠ” ì„¸ ê°€ì§€ ìœ íš¨í•œ ìŠ¤í¬ë¦½íŠ¸ì˜ ì‚¬ë¡€ë¥¼ ë³´ì—¬ì¤ë‹ˆë‹¤.

![image](https://github.com/user-attachments/assets/613910bd-9c2d-4840-b2b8-1bc31f1f2112)
![image](https://github.com/user-attachments/assets/b163f15d-407d-4573-bf22-07bbd6388053)
![image](https://github.com/user-attachments/assets/addd2637-1186-4ee2-b115-157f401e2139)

ê·¸ë¦¼ 2. `scriptPubKey_1`ê³¼ `scriptSig_1` ì„œëª… ìˆ˜(M)ëŠ” 2ì´ê³  ê³µê°œ í‚¤ ìˆ˜(N)ëŠ” 4ì…ë‹ˆë‹¤. `sig_1`ì€ `pub_key_1`ë¡œ, `sig_2`ëŠ” `pub_key_3`ë¡œ ê²€ì¦ë˜ì—ˆìŠµë‹ˆë‹¤.

![image](https://github.com/user-attachments/assets/be561400-bad3-4737-ab90-0fb1c09c1f79)
![image](https://github.com/user-attachments/assets/40d049ff-fb64-4d09-b3a0-68f55e99f476)
![image](https://github.com/user-attachments/assets/2329bf8b-4c84-47a9-9168-5cd16d0631f6)

ê·¸ë¦¼ 3. `scriptPubKey_2`ì™€ `scriptSig_2` ì„œëª… ìˆ˜(M)ëŠ” 3ì´ê³  ê³µê°œ í‚¤ ìˆ˜(N)ëŠ” 5ì…ë‹ˆë‹¤. `sig_1`ì€ `pub_key_1`ë¡œ, `sig_2`ëŠ” `pub_key_2`ë¡œ, `sig_3`ëŠ” `pub_key_4`ë¡œ ê²€ì¦ë˜ì—ˆìŠµë‹ˆë‹¤.

![image](https://github.com/user-attachments/assets/f2763ab0-cb8f-4667-b039-5fa1d4a4cecd)
![image](https://github.com/user-attachments/assets/ae589273-e5dc-43f9-a4c6-e0ce4c25c799)
![image](https://github.com/user-attachments/assets/34c83e1d-9c14-4e0c-bb95-5519434459ba)

ê·¸ë¦¼ 4. `scriptPubKey_3`ê³¼ `scriptSig_3` ì„œëª… ìˆ˜(M)ëŠ” 4ì´ê³  ê³µê°œ í‚¤ ìˆ˜(N)ëŠ” 7ì…ë‹ˆë‹¤. `sig_1`ì€ `pub_key_2`ë¡œ, `sig_2`ëŠ” `pub_key_4`ë¡œ, `sig_3`ëŠ” `pub_key_6`ë¡œ, `sig_4`ëŠ” `pub_key_7`ë¡œ ê²€ì¦ë˜ì—ˆìŠµë‹ˆë‹¤.
